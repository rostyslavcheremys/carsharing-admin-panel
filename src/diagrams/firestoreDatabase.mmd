---
config:
  theme: dark
---
erDiagram
    CARS {
        string id "ID"
        string brand "Марка"
        string model "Модель"
        string licensePlate "Номерний знак"
        string status "Статус"
        string transmissionType "Коробка передач"
        string powertrainType "Тип двигуна"
        string bodyType "Тип кузова"
        string driveType "Тип приводу"
        string color "Колір"
        number year "Рік випуску"
        number mileage "Пробіг"
        number pricePerDay "Вартість за добу"
        number seats "Кількість місць"
        number rating "Рейтинг"
        array images "Фотографії"
        map battery "Батарея"
        map engine "Двигун"
        geopoint location "Місцезнаходження"
    }

    ENGINE {
        string fuelType "Тип палива"
        number displacement "Об'єм двигуна"
    }

    BATTERY {
        number capacity "Ємність батареї"
        number range "Запас ходу"
    }

    LOCATION {
        number latitude "Широта"
        number longitude "Довгота"
    }

    USERS {
        string id "ID"
        string firstName "Ім'я"
        string lastName "Прізвище"
        string email "Електронна адреса"
        string phone "Номер телефону"
        string role "Роль"
        timestamp birthDate "Дата народження"
        timestamp createdAt "Дата створення"
        string drivingLicense "Посвідчення водія"
    }

    BOOKINGS {
        string id "ID"
        string carId "ID автомобіля"
        string userId "ID користувача"
        timestamp plannedStart "Запланований початок оренди"
        timestamp plannedEnd "Заплановане завершення оренди"
        string status "Статус бронювання"
        timestamp createdAt "Дата створення"
    }

    TRIPS {
        string id "ID"
        string bookingId "ID бронювання"
        string carId "ID автомобіля"
        string userId "ID користувача"
        timestamp actualStart "Фактичний початок поїздки"
        timestamp actualEnd "Фактичне завершення поїздки"
        string status "Статус поїздки"
        number totalPrice "Загальна вартість"
        geopoint startLocation "Початкове місцезнаходження"
        geopoint endLocation "Кінцеве місцезнаходження"
        string stateBeforeId "ID стану авто до поїздки"
        string stateAfterId "ID стану авто після поїздки"
    }

    CAR_STATE {
        string id "ID"
        string tripId "ID поїздки"
        string description "Опис стану автомобіля"
        number mileage "Пробіг автомобіля"
        array images "Фотографії стану автомобіля"
        map energyLevel "Рівень пального / заряду батареї"
    }

    ENERGY_LEVEL {
        number batteryPercent "Рівень заряду батареї"
        number fuelPercent "Рівень пального"
    }

    CARS ||--|| ENGINE: engine
    CARS ||--|| BATTERY: battery
    CARS ||--|| LOCATION: location
    CARS ||--o| BOOKINGS : car
    CARS ||--o| TRIPS : car

    USERS ||--o| BOOKINGS : user
    USERS ||--o| TRIPS : user

    BOOKINGS ||--o| TRIPS : generates

    TRIPS ||--|| CAR_STATE : stateBefore
    TRIPS ||--|| CAR_STATE : stateAfter
    TRIPS ||--|| LOCATION : startLocation
    TRIPS ||--|| LOCATION : endLocation

    CAR_STATE ||--|| ENERGY_LEVEL : energyLevel