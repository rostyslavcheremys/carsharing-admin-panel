---
config:
  theme: default
  look: classic
---
erDiagram
    CARS {
        string id "ID"
        string brand "Марка"
        string model "Модель"
        string licensePlate "Номерний знак"
        string status "Статус"
        string transmissionType "Тип трансмісії"
        string powertrainType "Тип силової уставноки"
        string bodyType "Тип кузова"
        string driveType "Тип приводу"
        string color "Колір"
        number year "Рік випуску"
        number mileage "Пробіг"
        number pricePerDay "Вартість за добу"
        number seats "Кількість місць"
        number rating "Рейтинг"
        map battery "Батарея"
        map engine "Двигун"
        array images "Фотографії"
        geopoint location "Місцезнаходження"
    }

    ENGINE {
        string fuelType "Тип палива"
        number displacement "Об'єм двигуна"
    }

    BATTERY {
        number capacity "Ємність батареї"
        number range "Запас ходу"
    }

    LOCATION {
        number latitude "Широта"
        number longitude "Довгота"
    }

    USERS {
        string id "ID"
        string firstName "Ім'я"
        string lastName "Прізвище"
        string email "Електронна адреса"
        string phone "Номер телефону"
        string role "Роль"
        string drivingLicense "Посвідчення водія"
        timestamp birthDate "Дата народження"
        timestamp createdAt "Дата створення"
    }

    BOOKINGS {
        string id "ID"
        string carId "ID автомобіля"
        string userId "ID користувача"
        string status "Статус"
        timestamp plannedStart "Запланований початок"
        timestamp plannedEnd "Заплановане завершення"
        timestamp createdAt "Дата створення"
    }

    TRIPS {
        string id "ID поїздки"
        string carId "ID автомобіля"
        string userId "ID користувача"
        string bookingId "ID бронювання"
        string stateBeforeId "ID стану до поїздки"
        string stateAfterId "ID стану після поїздки"
        string status "Статус"
        number totalPrice "Загальна вартість"
        timestamp actualStart "Фактичний початок"
        timestamp actualEnd "Фактичне завершення"
        geopoint startLocation "Початкове місцезнаходження"
        geopoint endLocation "Кінцеве місцезнаходження"
    }

    CAR_STATE {
        string id "ID"
        string description "Опис"
        number mileage "Пробіг"
        array images "Фотографії"
        map energyLevel "Енергетичний рівень"
    }

    ENERGY_LEVEL {
        number batteryPercent "Рівень заряду батареї"
        number fuelPercent "Рівень пального"
    }

    CARS ||--|| ENGINE : "оснащений двигуном"
    CARS ||--|| BATTERY : "оснащений батареєю"
    CARS ||--|| LOCATION : "розташований у"

    CARS ||--o| BOOKINGS : "може бути заброньований"
    CARS ||--o| TRIPS : "використовується у поїздці"

    USERS ||--o| BOOKINGS : "створює бронювання"
    USERS ||--o| TRIPS : "здійснює поїздку"

    BOOKINGS ||--o| TRIPS : "є підставою для поїздки"

    TRIPS ||--|| CAR_STATE : "фіксує стан до початку"
    TRIPS ||--|| CAR_STATE : "фіксує стан після завершення"
    TRIPS ||--|| LOCATION : "починається в"
    TRIPS ||--|| LOCATION : "завершується в"

    CAR_STATE ||--|| ENERGY_LEVEL : "відображає енергетичний рівень"